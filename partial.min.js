function Partial(s){this._params=s,this._partialProcessed="",this.load=function(s){this._completeCallback=s;var a=this;return void 0!=this._params.data?this.process(this._params.data):$.get(this._params.file,function(s){a.process(s)}),this},this.process=function(s){this._partialProcessed=s,this.processAllPartials(),this.processMasterPartial()},this.processMasterPartial=function(){for(var s in this._params.values)this.fill(s,this._params.values[s]);this._completeCallback(this._partialProcessed)},this.processAllPartials=function(){if(void 0!=this._params.partials)for(var s=0;s<this._params.partials.length;s++)this.loadAndProcessPartial(this._params.partials[s]);else this.processMasterPartial()},this.loadAndProcessPartial=function(s){if(void 0!=s.data)this.processPartial(s,s.data);else{var a=this;$.get(s.file,function(t){a.processPartial(s,t)})}},this.processPartial=function(s,a){for(var t="",i=0;i<s.values.length;i++){var r=a;for(var l in s.values[i])r=this.fillWith(r,l,s.values[i][l]);t+=r}this.fill(s.name,t),this.processMasterPartial()},this.fillWith=function(s,a,t){return s.replaceAll("{{"+a+"}}",t)},this.fill=function(s,a){this._partialProcessed=this._partialProcessed.replaceAll("{{"+s+"}}",a)}}String.prototype.replaceAll=function(s,a){for(var t=this,i=t.indexOf(s);i>-1;)t=t.replace(s,a),i=t.indexOf(s);return t};