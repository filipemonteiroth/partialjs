function Partial(e){this._params=e;this._partialProcessed="";this.load=function(e){this._completeCallback=e;var t=this;if(this._params.data!=undefined){this.process(this._params.data)}else{$.get(this._params.file,function(e){t.process(e)})}return this};this.process=function(e){this._partialProcessed=e;this.processAllPartials();for(var t in this._params.values){this.fill(t,this._params.values[t])}this._completeCallback(this._partialProcessed)};this.processAllPartials=function(){if(this._params.partials!=undefined){for(var e=0;e<this._params.partials.length;e++){this.loadAndProcessPartial(this._params.partials[e])}}};this.loadAndProcessPartial=function(e){if(e.data!=undefined){this.processPartial(e,e.data)}else{var t=this;$.get(e.file,function(n){t.processPartial(e,n)})}};this.processPartial=function(e,t){var n="";for(var r=0;r<e.values.length;r++){var i=t;for(var s in e.values[r]){i=this.fillWith(i,s,e.values[r][s])}n+=i}this.fill(e.name,n)};this.fillWith=function(e,t,n){return e.replaceAll("{{"+t+"}}",n)};this.fill=function(e,t){this._partialProcessed=this._partialProcessed.replaceAll("{{"+e+"}}",t)}}String.prototype.replaceAll=function(e,t){var n=this;var r=n.indexOf(e);while(r>-1){n=n.replace(e,t);r=n.indexOf(e)}return n};
